<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Hidden Konami JS by rorosaurus</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="konami.js"></script>
    <script type="text/javascript" src="md5.min.js"></script>
    <script type="text/javascript" src="generator.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Hidden Konami JS</h1>
        <p>A modified konami-js with custom code patterns obfuscated by hash to keep them and easter egg function secret</p>

        <p class="view"><a href="https://github.com/rorosaurus/hidden-konami-js">View the Project on GitHub <small>rorosaurus/hidden-konami-js</small></a></p>


        <ul>
          <li><a href="https://github.com/rorosaurus/hidden-konami-js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/rorosaurus/hidden-konami-js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/rorosaurus/hidden-konami-js">View On <strong>GitHub</strong></a></li>
        </ul>
        
        <br><br>
        
        <h3>Want help creating a pattern?</h3>
        <small>Your keypresses are recorded as a pattern below</small><br>
        <script>var generator = new Generator();</script>
        <p><button type="button" onclick="generator.reset();">Reset pattern</button></p>
        
        <form name="generatedValues">
        <strong>Here's the raw keycode for your pattern</strong><br>
        Pattern Keycodes:<br><input type = "text" name="patternstring" size="32"><br>
        
		<strong>Here are the values you'll use</strong><br>
        Pattern Hash:<br><input type = "text" name="patternhash" size="32"><br>
        Pattern Length:<br><input type = "text" name="patternstringlength" size="32"><br>
        JS File Name:<br><input type = "text" name="jsfilename" size="32"><br>
        JS Function Name:<br><input type = "text" name="jsfunctionname" size="32"><br>
        </form>
      </header>
      <section>
        <h1>
<a id="hidden-konami-js" class="anchor" href="#hidden-konami-js" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hidden-Konami-JS</h1>

<p>Check out the original repo here: <a href="https://github.com/snaptortoise/konami-js">https://github.com/snaptortoise/konami-js</a></p>

<p>Thanks to <a href="https://github.com/blueimp/JavaScript-MD5">https://github.com/blueimp/JavaScript-MD5</a> for the MD5 implementation.</p>

<p>Both sources use MIT license</p>

<h2>
<a id="what" class="anchor" href="#what" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What</h2>

<p>Basically, this fork sacrifices touchscreen support to allow customization of obfuscated patterns.</p>

<h2>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why</h2>

<p>Maybe you want your website to do something special, but you don't want it to be immediately obvious what the pattern is upon inspection of the source. Using MD5 is cheap and good enough for this, and it would be funny to see someone try and find a collision just to find out the pattern.</p>

<h3>
<a id="you-realize-everyone-can-see-the-code-the-pattern-executes-anyway-right-this-doesnt-hide-that" class="anchor" href="#you-realize-everyone-can-see-the-code-the-pattern-executes-anyway-right-this-doesnt-hide-that" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>You realize everyone can see the code the pattern executes anyway, right? This doesn't hide that.</h3>

<p>Actually, that only just occured to me.  Damn.  <em>thinks furiously</em></p>

<p>Two options immediately present themselves:</p>

<ul>
<li>Obfuscate or minify the Javascript you want to execute (trivial to beautify) or...</li>
<li>You could, once the pattern is recognized, append something, calculate a new hash, and use that hash to get new code from the server.  Perhaps the easiest way to do this would be to have a .js file named with the new hash, with some function name we expect, which we then import and call.  I've implemented this one in the absence of recognizing a better solution.</li>
</ul>

<h2>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo</h2>

<p>See the bundled index.html, konami.js, and md5.min.js files.</p>

<ul>
<li>Between these files, you are only presented a hash and the length of the pattern.</li>
<li>You cannot determine the magic pattern from this information alone (ignoring collisions)</li>
<li>When the pattern is recognized another hash is created, which loads and executes the next .js file:</li>
</ul>

<p>The d3207cc4375db28d31757a64ffecbd51.js file contains the easter egg payload.</p>

<ul>
<li>This file is not obfuscated, so the payload is secured through obscurity alone.</li>
<li>Presumably this is hosted on a server where visitors cannot simply see the whole directory of files.</li>
<li>Knowing this hash, a vistor will know the end result of the easter egg but cannot determine the pattern needed to reach there ordinarily (ignoring collisions).</li>
</ul>

<h2>
<a id="this-is-not-secure" class="anchor" href="#this-is-not-secure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>This is not secure</h2>

<p>You are correct.  Please do not use this to secure anything actually important.  This is just meant to be a simple way to make some dumb secret jokes on your website, which can (mostly) only be discovered or spread by word-of-mouth.  This was a random idea of mine and I just wanted to see if I can get it to work.</p>

<h3>
<a id="links" class="anchor" href="#links" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Links</h3>

<p>Find your keycodes:
<a href="http://javascriptkeycodes.com/">http://javascriptkeycodes.com/</a>
<a href="http://www.cambiaresearch.com/articles/15/javascript-key-codes">http://www.cambiaresearch.com/articles/15/javascript-key-codes</a></p>

<p>Find MD5 hash:
<a href="https://blueimp.github.io/JavaScript-MD5/">https://blueimp.github.io/JavaScript-MD5/</a></p>
<p>You can test the Konami code: up, up, down, down, left, right, left, right, b, a</p>
        <p>Hash passed into Konami function: 0a75e752070ffe5ed283de6d81efb3db (this is the MD5 hash of the keycodes for Konami code: 38384040373937396665)</p>
        <p>Pattern length passed into Konami function: 10</p>
        <p>New hash calculated to locate the easter egg .js file: d3207cc4375db28d31757a64ffecbd51</p>
        <script>var easter_egg = new Konami("0a75e752070ffe5ed283de6d81efb3db", 20);</script>
		<script>var easter_egg2 = new Konami("2c1f8024fd09b1041479476ddadefa10", 10);</script>
		<script>var easter_egg3 = new Konami("fd79185e94f3298b8c5836605a485fd9", 20);</script>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/rorosaurus">rorosaurus</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
